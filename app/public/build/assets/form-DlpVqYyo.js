var la=g=>{throw TypeError(g)};var X=(g,e,a)=>e.has(g)||la("Cannot "+a);var r=(g,e,a)=>(X(g,e,"read from private field"),a?a.call(g):e.get(g)),v=(g,e,a)=>e.has(g)?la("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(g):e.set(g,a),j=(g,e,a,t)=>(X(g,e,"write to private field"),t?t.call(g,a):e.set(g,a),a),c=(g,e,a)=>(X(g,e,"access private method"),a);import{c as n,e as _,a as M,m as ct,B as lt}from"./commonFunctions-iccisCSl.js";import{m as dt}from"./modalMessage-CWFhqvtB.js";import{a as ua,m as na}from"./modalSearchAndFormRegistration-3_gFT7xi.js";import{D}from"./DateTimeHelper-Bk_AnO7D.js";import{U as fa,a as A}from"./UUIDHelper-C7Qwh3zO.js";import{S as ma,m as ut,R as pa}from"./ServicoParticipacaoModule-Bhhk-2vT.js";import{R as ft}from"./RedirectHelper-MLdxMTBD.js";import{S as mt}from"./ServicoParticipacaoHelpers-TdzyWMCy.js";import{S as pt}from"./SimpleBarHelper-CKQrGYS0.js";var N,k,y,ba,ga,va,_a,ha,$a;class bt extends ua{constructor(){super({idModal:"#modalConta"});v(this,y);v(this,N,{formRegistros:!0,querys:{consultaFiltros:{name:"consulta-filtros",url:window.apiRoutes.baseContas,urlSearch:`${window.apiRoutes.baseContas}/consulta-filtros`,sufixo:"ModalConta"}}});v(this,k,{selecteds:[]});this._objConfigs=Object.assign(this._objConfigs,r(this,N)),this._promisseReturnValue=Object.assign(this._promisseReturnValue,r(this,k)),c(this,y,ba).call(this)}async modalOpen(){const a=this;return await a._modalHideShow(),await a._modalOpen()}async insertTableData(a,t={}){var f,p,b,h;const o=this,{tbody:s}=t;let i=c(f=o,y,va).call(f,a);i+=c(p=o,y,ga).call(p,a),i+=c(b=o,y,_a).call(b,a);let l=0;return a.ultima_movimentacao&&(l=a.ultima_movimentacao.saldo_atualizado),l=n.formatNumberToCurrency(l),$(s).append(`
            <tr id="${a.idTr}" data-id="${a.id}">
                <td class="text-center">
                    <div class="btn-group btnsAcao" role="group">
                        ${i}
                    </div>
                </td>
                <td class="text-nowrap text-truncate" style="max-width: 10rem" title="${a.nome}">${a.nome}</td>
                <td class="text-nowrap text-truncate" style="max-width: 10rem" title="${l}">${l}</td>
                <td class="text-nowrap text-truncate" style="max-width: 10rem" title="${a.banco??""}">${a.banco??""}</td>
                <td class="text-nowrap text-truncate" style="max-width: 10rem" title="${a.conta_subtipo.nome}">${a.conta_subtipo.nome}</td>
                <td class="text-nowrap text-truncate" style="max-width: 10rem" title="${a.conta_status.nome}">${a.conta_status.nome}</td>
            </tr>
        `),c(h=o,y,ha).call(h,a),!0}saveButtonAction(){var s;const a=this,t=$(a.getIdModal).find(".formRegistration");let o=n.getInputsValues(t[0]);c(s=a,y,$a).call(s,o,t)&&a._save(o,a._objConfigs.querys.consultaFiltros.url)}}N=new WeakMap,k=new WeakMap,y=new WeakSet,ba=function(){const a=this,t=$(a.getIdModal),o=t.find(`#formDataSearch${a._objConfigs.querys.consultaFiltros.sufixo}`);t.find(".btn-new-register").on("click",async()=>{a._updateTitleRegistration("Nova Conta")}),o.find(".btnBuscar").on("click",async s=>{s.preventDefault(),a._setTypeCurrentSearch=a._objConfigs.querys.consultaFiltros.name,a._generateQueryFilters()}).trigger("click"),n.fillSelect(t.find('select[name="conta_subtipo_id"]'),window.apiRoutes.baseContasSubtipo),n.fillSelect(t.find('select[name="conta_status_id"]'),window.apiRoutes.baseContasStatus,{selectedIdOption:1})},ga=function(a){return`<button type="button" class="btn btn-outline-primary btn-sm btn-edit" title="Editar conta ${a.nome}"><i class="bi bi-pencil"></i></button>`},va=function(a){var o,s;return(s=(o=this._dataEnvModal)==null?void 0:o.attributes)!=null&&s.select?`<button type="button" class="btn btn-outline-success btn-sm btn-select" title="Selecionar conta ${a.nome}"><i class="bi bi-check-lg"></i></button>`:""},_a=function(a){return`<button type="button" class="btn btn-outline-danger btn-sm btn-delete" title="Excluir conta ${a.nome}"><i class="bi bi-trash"></i></button>`},ha=function(a){const t=this;$(`#${a.idTr}`).find(".btn-edit").on("click",async function(){n.simulateLoading($(this));try{t._clearForm(),t._idRegister=a.id;const o=await t._getRecurse();if(o!=null&&o.data){t._action=_.PUT;const s=o.data;t._updateTitleRegistration(`Alterar: <b>${s.nome}</b>`);const i=$(t.getIdModal).find(".formRegistration");i.find('input[name="nome"]').val(s.nome),i.find('select[name="conta_subtipo_id"]').val(s.conta_subtipo_id),i.find('select[name="conta_status_id"]').val(s.conta_status_id),i.find('input[name="banco"]').val(s.banco),i.find('textarea[name="descricao"]').val(s.descricao),t._actionsHideShowRegistrationFields(!0),t._executeFocusElementOnModal(i.find('input[name="nome"]'))}}catch(o){n.generateNotificationErrorCatch(o)}finally{n.simulateLoading($(this),!1)}}),$(`#${a.idTr}`).find(".btn-select").on("click",async function(){var o,s;if((s=(o=t._dataEnvModal)==null?void 0:o.attributes)!=null&&s.select){const i=t._dataEnvModal.attributes.select,l=f=>{i!=null&&i.max?t._promisseReturnValue.selected=f:t._promisseReturnValue.selecteds.push(f),t._promisseReturnValue.refresh=!0,i!=null&&i.autoReturn&&i.autoReturn&&(i!=null&&i.max&&t._promisseReturnValue.selecteds.length==i.max||i!=null&&i.quantity&&t._promisseReturnValue.selecteds.length==i.quantity)&&(t._setEndTimer=!0)};i!=null&&i.max&&t._promisseReturnValue.selecteds.length<i.max||(t._promisseReturnValue.selecteds=[]),l(a)}}),$(`#${a.idTr}`).find(".btn-delete").on("click",async function(){t._delButtonAction(a.id,a.nome,{title:"Exclusão de Conta",message:`Confirma a exclusão da Conta <b>${a.nome}</b>?`,success:"Conta excluída com sucesso!",button:this})})},$a=function(a,t){let o=n.verificationData(a.nome,{field:t.find('input[name="nome"]'),messageInvalid:"O nome da conta deve ser informado.",setFocus:!0});return o=n.verificationData(a.conta_subtipo_id,{field:t.find('select[name="conta_subtipo_id"]'),messageInvalid:"Um subtipo de conta deve ser selecionado.",setFocus:o==!0,returnForcedFalse:o==!1}),o=n.verificationData(a.conta_status_id,{field:t.find('select[name="conta_status_id"]'),messageInvalid:"Uma status de conta deve ser selecionado.",setFocus:o==!0,returnForcedFalse:o==!1}),o};var q,H,U,m,wa,Ca,xa,Pa,Y,Ra,Ea,Z,Ma,V,Sa,aa,ta;class ya extends na{constructor(a){super({idModal:"#modalServicoPagamento"});v(this,m);v(this,q,{idRegister:void 0,pagamento_tipo_tenant_id:void 0});v(this,H,{url:{base:void 0,basePagamentoTipoTenants:window.apiRoutes.basePagamentoTipoTenants,baseContas:window.apiRoutes.baseContas},sufixo:"ModalServicoPagamento",data:{pagamento_tipo_tenant:void 0,lancamentos_na_tela:[]}});v(this,U,{refresh:!1});this._objConfigs=Object.assign(this._objConfigs,r(this,H)),this._promisseReturnValue=Object.assign(this._promisseReturnValue,r(this,U)),this._dataEnvModal=Object.assign(this._dataEnvModal,r(this,q)),this._objConfigs.url.base=a,this._action=_.POST,c(this,m,wa).call(this)}async modalOpen(){var t,o;const a=this;if(await n.loadingModalDisplay(!0,{message:"Carregando informações do pagamento..."}),await c(this,m,V).call(this),a._dataEnvModal.idRegister)await c(t=a,m,Sa).call(t);else if(a._dataEnvModal.pagamento_tipo_tenant_id)await c(o=a,m,Z).call(o);else return n.generateNotification("Tipo de pagamento não informado","error"),await a._returnPromisseResolve();return await n.loadingModalDisplay(!1),await a._modalHideShow(),await a._modalOpen()}_modalReset(){super._modalReset();const a=this;$(a.getIdModal).find(`#dados-pagamento${a._objConfigs.sufixo}-tab`).trigger("click"),$(a.getIdModal).find(".btn-simular").show()}saveButtonAction(){var o,s;const a=this,t=c(o=a,m,aa).call(o);t.pagamento_tipo_tenant_id=a._objConfigs.data.pagamento_tipo_tenant.id,c(s=a,m,ta).call(s,t)&&a._save(t,a._objConfigs.url.base)}}q=new WeakMap,H=new WeakMap,U=new WeakMap,m=new WeakSet,wa=function(){c(this,m,Ca).call(this)},Ca=function(){const a=this,t=$(a._idModal);t.find(".openModalConta").on("click",async function(){var s,i;const o=$(this);n.simulateLoading(o);try{const l=new bt;l.setDataEnvModal={attributes:{select:{quantity:1,autoReturn:!0}}},await a._modalHideShow(!1);const f=await l.modalOpen();if(f.refresh)if(f.selecteds.length>0){const p=f.selecteds[0];c(s=a,m,V).call(s,p.id)}else c(i=a,m,V).call(i)}catch(l){n.generateNotificationErrorCatch(l)}finally{n.simulateLoading(o,!1),await a._modalHideShow()}}),t.find(".btn-simular").on("click",async function(){var o;n.simulateLoading($(this));try{await c(o=a,m,xa).call(o)}finally{n.simulateLoading($(this),!1)}})},xa=async function(){var i,l,f,p;const a=this;$(a.getIdModal).find(".row-lancamentos").html("");const o=c(i=a,m,aa).call(i);if(!c(l=a,m,ta).call(l,o,"simulacao"))return;const s=await c(f=a,m,Pa).call(f,o);if(s!=null&&s.data){for(const b of s.data.lancamentos)await c(p=a,m,Y).call(p,b);n.generateNotification("Simulação de pagamento concluída.","success"),$(a.getIdModal).find(`#lancamentos${a._objConfigs.sufixo}-tab`).trigger("click")}},Pa=async function(a){const o=this._objConfigs.data.pagamento_tipo_tenant.pagamento_tipo.configuracao;try{const s=new M(fa.formatEndpointUrl(`${o.helper.endpoint_api}/render`));return s.setAction(_.POST),s.setData(a),await s.envRequest()}catch(s){return n.generateNotificationErrorCatch(s),!1}},Y=async function(a){var h,x,T,ra;const t=this,o=$(t.getIdModal).find(".row-lancamentos"),s=D.retornaDadosDataHora(a.data_vencimento,2),i=n.formatWithCurrencyCommasOrFraction(a.valor_esperado),l=((h=a.conta)==null?void 0:h.nome)??"Conta Padrão do Pagamento",f=((x=a.conta)==null?void 0:x.nome)??`<i>${l}</i>`;let p="",b="";if(a.idCard=`${A.generateUUID()}${t._objConfigs.sufixo}`,a.pagamento_id&&(b=c(T=t,m,Ea).call(T,{title:"Editar este lançamento"}),a.observacao)){const ca=a.observacao??"";p=`
                <div class="row">
                    <div class="col">
                        <label class="form-text">Observação (opcional)</label>
                        <p class="mb-0 text-truncate observacao-parcela" title="${ca}">
                            ${ca}
                        </p>
                    </div>
                </div>`}return o.append(`
            <div id="${a.idCard}" class="card p-0">
                <div class="card-header d-flex align-items-center justify-content-between">
                    <span>${a.descricao_automatica}</span>
                    ${b}
                </div>
                <div class="card-body">
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 align-items-end">
                        <div class="col">
                            <div class="form-text mt-0">Data de vencimento</div>
                            <p class="mb-0">${s}</p>
                        </div>
                        <div class="col">
                            <div class="form-text mt-0">Valor</div>
                            <p class="mb-0">${i}</p>
                        </div>
                        <div class="col">
                            <div class="form-text mt-0">Status</div>
                            <p class="mb-0">${a.status.nome}</p>
                        </div>
                        <div class="col">
                            <div class="form-text mt-0">Conta</div>
                            <p class="mb-0 text-truncate" title="${l}">
                                ${f}
                            </p>
                        </div>
                    </div>
                    ${p}
                </div>
            </div>`),c(ra=t,m,Ra).call(ra,a),a},Ra=async function(a){$(`#${a.idCard}`).find(".btn-edit").on("click",async function(){const t=$(this);n.simulateLoading(t);try{n.generateNotification("Editando lancamento...","info")}catch(o){n.generateNotificationErrorCatch(o)}finally{n.simulateLoading(t,!1)}})},Ea=function(a={}){const{title:t="Editar registro"}=a;return`<button type="button" class="btn btn-outline-primary btn-sm btn-edit border-0" title="${t}"><i class="bi bi-pencil"></i></button>`},Z=async function(a=!1){var o;const t=this;try{const s=new M(t._objConfigs.url.basePagamentoTipoTenants);s.setParam(t._dataEnvModal.pagamento_tipo_tenant_id),s.setData({modo_editar_bln:a}),s.setAction(_.POST);const i=await s.envRequest();t._objConfigs.data.pagamento_tipo_tenant=i.data,t._updateModalTitle(`${i.data.nome}`),$(t.getIdModal).find(".campos-personalizados").html(i.data.campos_html),c(o=t,m,Ma).call(o)}catch(s){n.generateNotificationErrorCatch(s)}},Ma=function(){const a=this,t=$(a.getIdModal);n.applyCustomNumberMask(t.find(".campos-personalizados .campo-monetario"),{format:"#.##0,00",reverse:!0}),t.find(".campos-personalizados .campo-dia-mes").mask("00",{onKeyPress:function(o,s,i){/^(0?[1-9]|[12][0-9]|3[01])$/.test(o)||i.val("")}}),n.applyCustomNumberMask(t.find(".campos-personalizados .campo-numero"),{format:"#.##0",reverse:!0})},V=async function(a=null){const t=this;let o=a?{selectedIdOption:a}:{};const s=$(t.getIdModal).find('select[name="conta_id"]');await n.fillSelect(s,t._objConfigs.url.baseContas,o)},Sa=async function(){var t,o;const a=this;try{a._clearForm(),$(a.getIdModal).find(".btn-simular").hide(),a._action=_.PUT;const s=await a._getRecurse();if(s!=null&&s.data){const i=s.data,l=i.pagamento_tipo_tenant,f=l.pagamento_tipo.configuracao;a._updateModalTitle(`Alterar: <b>${l.nome}</b>`),a._dataEnvModal.pagamento_tipo_tenant_id=l.id,await c(t=a,m,Z).call(t,!0);const p=$(a.getIdModal).find(".formRegistration");p.find('select[name="conta_id"]').val(i.conta_id);for(const b of f.campos_obrigatorios){const h=b.formRequestRule.split("|");let x=i[b.nome];h.find(T=>T==="numeric")&&(x=n.formatWithCurrencyCommasOrFraction(x)),p.find(`#${b.nome}${a._objConfigs.sufixo}`).val(x).trigger("input")}for(const b of i.lancamentos)c(o=a,m,Y).call(o,b);p.find('input[name="observacao"]').val(i.observacao)}}catch(s){n.generateNotificationErrorCatch(s)}},aa=function(){const a=this,t=$(a.getIdModal).find(".formRegistration");return n.getInputsValues(t[0])},ta=function(a,t="save"){const o=this,s=$(o.getIdModal).find(".formRegistration"),i=o._objConfigs.data.pagamento_tipo_tenant.pagamento_tipo.configuracao;let l=!1;if((o._action==_.POST||o._action==_.PUT&&t=="save")&&(l=n.verificationData(a.conta_id,{field:s.find('select[name="conta_id"]'),messageInvalid:"A <b>Conta padrão</b> deve ser informada.",setFocus:!0}),o._action==_.POST))for(const f of i.campos_obrigatorios)f.formRequestRule.split("|").find(b=>b==="numeric"||b==="integer")&&(a[f.nome]=n.removeCommasFromCurrencyOrFraction(a[f.nome])),l=n.verificationData(a[f.nome],{field:s.find(`#${f.nome}${o._objConfigs.sufixo}`),messageInvalid:`O campo <b>${f.nome_exibir}</b> deve ser informado.`,setFocus:l===!0,returnForcedFalse:l===!1});return l};var B,P,Ta,ja,Da,Oa;class gt extends ct{constructor(a){super({idModal:"#modalSelecionarPagamentoTipo"});v(this,P);v(this,B,{url:{base:window.apiRoutes.basePagamentoTipoTenants,baseServico:void 0},sufixo:"ModalSelecionarPagamentoTipo"});this._objConfigs=Object.assign(this._objConfigs,r(this,B)),this._objConfigs.url.baseServico=a,c(this,P,Ta).call(this)}async modalOpen(){var t;const a=this;return await n.loadingModalDisplay(!0,{message:"Carregando tipos de pagamento...",title:"Aguarde...",elementFocus:null}),await c(t=a,P,Da).call(t,$(a.getIdModal).find('select[name="pagamento_tipo_tenant_id"]')),await n.loadingModalDisplay(!1),await a._modalHideShow(),await a._modalOpen()}_modalReset(){const a=this,o=$(a.getIdModal).find(".formRegistration");o.find("select").val(0),o[0].reset(),o.find("input, select, textarea").removeClass("is-valid").removeClass("is-invalid")}async saveButtonAction(){var s;const a=this,t=$(a.getIdModal).find(".formRegistration");let o=n.getInputsValues(t[0]);if(c(s=a,P,Oa).call(s,o,t))try{await a._modalHideShow(!1);const i=new ya(`${a._objConfigs.url.baseServico}/pagamentos`);i._dataEnvModal={pagamento_tipo_tenant_id:o.pagamento_tipo_tenant_id},a._promisseReturnValue=await i.modalOpen()}catch(i){n.generateNotificationErrorCatch(i)}finally{a._setEndTimer=!0}}}B=new WeakMap,P=new WeakSet,Ta=function(){c(this,P,ja).call(this)},ja=function(){const a=this;$(a._idModal).find(".openModalPagamentoTipoTenant").on("click",async function(){const o=$(this);n.simulateLoading(o);try{n.generateNotification("Funcionalidade para criar e alterar formas de pagamento, em desenvolvimento.","warning")}catch(s){n.generateNotificationErrorCatch(s)}finally{n.simulateLoading(o,!1)}})},Da=async function(a=null){const t=this;let o=a?{selectedIdOption:a}:{};const s=$(t.getIdModal).find('select[name="pagamento_tipo_tenant_id"]');await n.fillSelect(s,t._objConfigs.url.base,o)},Oa=function(a,t){return n.verificationData(a.pagamento_tipo_tenant_id,{field:t.find('select[name="pagamento_tipo_tenant_id"]'),messageInvalid:"Selecione um tipo de pagamento.",setFocus:!0})};var O,Aa,Fa;class da extends na{constructor(a){super({idModal:"#modalServicoAnotacao"});v(this,O);this._action=_.POST,this._objConfigs.url.base=a}async modalOpen(){var t;const a=this;if(a._dataEnvModal.idRegister)if(await c(t=a,O,Fa).call(t))await a._modalHideShow();else return await a._returnPromisseResolve();else await a._modalHideShow(),a._executeFocusElementOnModal($(a.getIdModal).find(".focusRegister"));return await a._modalOpen()}saveButtonAction(){var s;const a=this,t=$(a.getIdModal).find(".formRegistration");let o=n.getInputsValues(t[0]);c(s=a,O,Aa).call(s,o,t)&&a._save(o,a._objConfigs.url.base)}}O=new WeakSet,Aa=function(a,t){let o=n.verificationData(a.titulo,{field:t.find('input[name="titulo"]'),messageInvalid:"O título deve ser informado.",setFocus:!0});return o=n.verificationData(a.descricao,{field:t.find('textarea[name="descricao"]'),messageInvalid:"Uma descrição deve ser adicionada.",setFocus:o==!0,returnForcedFalse:o==!1}),o},Fa=async function(){const a=this;await n.loadingModalDisplay();try{a._clearForm(),a._action=_.PUT;const t=await a._getRecurse();if(t!=null&&t.data){const o=t.data;a._updateModalTitle(`Alterar: <b>${o.titulo}</b>`);const s=$(a.getIdModal).find(".formRegistration");return s.find('input[name="titulo"]').val(o.titulo),s.find('textarea[name="descricao"]').val(o.descricao).focus(),!0}return!1}catch(t){return n.generateNotificationErrorCatch(t),!1}finally{await n.loadingModalDisplay(!1)}};var W,z,J,S,Q,Ia;class vt extends na{constructor(a={}){super({idModal:"#modalServicoParticipacao"});v(this,Q);v(this,W,{idRegister:void 0,pagamento_tipo_tenant_id:void 0});v(this,z,{url:{base:void 0,baseParticipacaoPreset:window.apiRoutes.baseParticipacaoPreset,baseParticipacaoTipo:window.apiRoutes.baseServicoParticipacaoTipoTenant},sufixo:"ModalServicoParticipacao",data:{porcentagemOcupada:0,participantesNaTela:[]}});v(this,J,{refresh:!1});v(this,S);this._objConfigs=Object.assign(this._objConfigs,r(this,z)),this._promisseReturnValue=Object.assign(this._promisseReturnValue,r(this,J)),this._dataEnvModal=Object.assign(this._dataEnvModal,r(this,W)),this._action=_.POST,this._objConfigs.url.base=a.urlApi;const t={objConfigs:this._objConfigs,extraConfigs:{typeParent:"modal",modeParent:"searchAndUse"}};j(this,S,new ma(this,t)),c(this,Q,Ia).call(this)}async modalOpen(){const a=this;return await n.loadingModalDisplay(!0,{message:"Carregando informações da participação..."}),await r(a,S)._buscarPresetParticipacaoTenant(),await a._buscarDados()?(await n.loadingModalDisplay(!1),await a._modalHideShow(),await a._modalOpen()):(await n.loadingModalDisplay(!1),await a._returnPromisseResolve())}_clearForm(){const a=this;$(`#divParticipantes${a._objConfigs.sufixo}`).html(""),r(a,S)._atualizaPorcentagemLivre()}async _buscarDados(){const a=this;try{a._clearForm();const t=await pa.get({urlApi:a._objConfigs.url.base});return t!=null&&t.data&&r(a,S)._inserirParticipantesEIntegrantes(t.data),!0}catch(t){return n.generateNotificationErrorCatch(t),!1}}async saveButtonAction(){const a=this;let t={participantes:a._objConfigs.data.participantesNaTela};r(a,S)._saveVerificationsParticipantes(t)&&await a._save(t,a._objConfigs.url.base,{fieldRegisterName:"registers"})}}W=new WeakMap,z=new WeakMap,J=new WeakMap,S=new WeakMap,Q=new WeakSet,Ia=function(){const a=this;$(a._idModal).find(".btnOpenModalTipoParticipacao").on("click",async function(){const o=$(this);n.simulateLoading(o);try{const s=new ut;s.setDataEnvModal={attributes:{select:{quantity:1,autoReturn:!0}}},await a._modalHideShow(!1);const i=await s.modalOpen();i.refresh&&i.selected&&$(a.getIdModal).find('select[name="preset_id"]').val(i.selected.id)}catch(s){n.generateNotificationErrorCatch(s)}finally{n.simulateLoading(o,!1),await a._modalHideShow()}})};var G,K,C,Va,La,Na,ka,qa;class _t extends ua{constructor(){super({idModal:"#modalAreaJuridicaTenant"});v(this,C);v(this,G,{formRegistros:!0,querys:{consultaFiltros:{name:"consulta-filtros",url:window.apiRoutes.baseAreaJuridicaTenant,urlSearch:`${window.apiRoutes.baseAreaJuridicaTenant}/consulta-filtros`}}});v(this,K,{selecteds:[]});this._objConfigs=Object.assign(this._objConfigs,r(this,G)),this._promisseReturnValue=Object.assign(this._promisseReturnValue,r(this,K)),c(this,C,Va).call(this)}async modalOpen(){const a=this;return await a._modalHideShow(),await a._modalOpen()}async insertTableData(a,t={}){var l,f,p;const o=this,{tbody:s}=t;let i=c(l=o,C,Na).call(l);return i+=c(f=o,C,La).call(f),$(s).append(`
            <tr id="${a.idTr}" data-id="${a.id}">
                <td class="text-center">
                    <div class="btn-group btnsAcao" role="group">
                        ${i}
                    </div>
                </td>
                <td class="text-nowrap text-truncate" style="max-width: 20rem" title="${a.nome}">${a.nome}</td>
            </tr>
        `),c(p=o,C,ka).call(p,a),!0}saveButtonAction(){var s;const a=this,t=$(a.getIdModal).find(".formRegistration");let o=n.getInputsValues(t[0]);c(s=a,C,qa).call(s,o,t)&&a._save(o,a._objConfigs.querys.consultaFiltros.url)}}G=new WeakMap,K=new WeakMap,C=new WeakSet,Va=function(){const a=this,t=$(a.getIdModal),o=t.find("#formDataSearchModalAreaJuridicaTenant");t.find(".btn-new-register").on("click",async()=>{a._updateTitleRegistration("Nova Área de Atuação Jurídica")}),o.find(".btnBuscar").on("click",async s=>{s.preventDefault(),a._setTypeCurrentSearch=a._objConfigs.querys.consultaFiltros.name,await a._generateQueryFilters()}).trigger("click")},La=function(){return'<button type="button" class="btn btn-outline-primary btn-sm btn-edit" title="Editar registro"><i class="bi bi-pencil"></i></button>'},Na=function(){var t,o;return(o=(t=this._dataEnvModal)==null?void 0:t.attributes)!=null&&o.select?'<button type="button" class="btn btn-outline-success btn-sm btn-select" title="Selecionar registro"><i class="bi bi-check-lg"></i></button>':""},ka=function(a){const t=this;$(`#${a.idTr}`).find(".btn-edit").on("click",async function(){n.simulateLoading($(this));try{t._clearForm(),t._idRegister=a.id;const o=await t._getRecurse();if(o!=null&&o.data){t._action=_.PUT;const s=o.data;t._updateTitleRegistration(`Alterar: <b>${s.nome}</b>`);const i=$(t.getIdModal).find(".formRegistration");i.find('input[name="nome"]').val(s.nome),i.find('textarea[name="descricao"]').val(s.descricao),t._actionsHideShowRegistrationFields(!0),t._executeFocusElementOnModal(i.find('input[name="nome"]'))}}catch(o){n.generateNotificationErrorCatch(o)}finally{n.simulateLoading($(this),!1)}}),$(`#${a.idTr}`).find(".btn-select").on("click",async function(){var o,s;if((s=(o=t._dataEnvModal)==null?void 0:o.attributes)!=null&&s.select){const i=t._dataEnvModal.attributes.select,l=t._promisseReturnValue;(p=>{i!=null&&i.quantity&&i.quantity==1?l.selected=p:l.selecteds.push(p),l.refresh=!0,i!=null&&i.autoReturn&&i.autoReturn&&(i!=null&&i.quantity&&l.selecteds.length==i.quantity||i!=null&&i.quantity&&i.quantity==1&&l.selected)&&(t._setEndTimer=!0)})(a)}})},qa=function(a,t){return n.verificationData(a.nome,{field:t.find('input[name="nome"]'),messageInvalid:"O nome da Área Jurídica deve ser informado.",setFocus:!0})};var u,R,w,E,d,Ha,ea,Ua,oa,Ba,Wa,za,Ja,Qa,Ga,sa,Ka,Xa,Ya,Za,L,F,at,ia,tt,I,et,ot,st,it,nt,rt;class ht{constructor(){v(this,d);v(this,u,{url:{base:window.apiRoutes.baseServico,baseAnotacao:void 0,basePagamentos:void 0,baseParticipacao:void 0,baseValores:void 0,baseAreaJuridicaTenant:window.apiRoutes.baseAreaJuridicaTenant,baseParticipacaoPreset:window.apiRoutes.baseParticipacaoPreset,baseParticipacaoTipo:window.apiRoutes.baseServicoParticipacaoTipoTenant},sufixo:"PageServicoForm",data:{porcentagemOcupada:0,participantesNaTela:[]}});v(this,R);v(this,w);v(this,E);const e={objConfigs:r(this,u),extraConfigs:{modeParent:"searchAndUse"}};j(this,E,new ma(this,e)),this.initEvents()}initEvents(){var t,o;const e=this;c(this,d,L).call(this);const a=fa.getURLSegment();A.isValidUUID(a)?(j(e,w,a),r(e,u).url.baseAnotacao=`${r(e,u).url.base}/${r(e,w)}/anotacao`,r(e,u).url.basePagamentos=`${r(e,u).url.base}/${r(e,w)}/pagamentos`,r(e,u).url.baseParticipacao=`${r(e,u).url.base}/${r(e,w)}/participacao`,r(e,u).url.baseValores=`${r(e,u).url.base}/${r(e,w)}/relatorio/valores`,j(this,R,_.PUT),c(t=e,d,Ga).call(t)):j(this,R,_.POST),c(o=e,d,Ha).call(o)}}u=new WeakMap,R=new WeakMap,w=new WeakMap,E=new WeakMap,d=new WeakSet,Ha=function(){const e=this;$(`#btnOpenAreaJuridicaTenant${r(e,u).sufixo}`).on("click",async function(){var t,o;const a=$(this);n.simulateLoading(a);try{const s=new _t;s.setDataEnvModal={attributes:{select:{quantity:1,autoReturn:!0}}};const i=await s.modalOpen();if(i.refresh)if(i.selecteds.length>0){const l=i.selecteds[0];c(t=e,d,L).call(t,l.id)}else c(o=e,d,L).call(o)}catch(s){n.generateNotificationErrorCatch(s)}finally{n.simulateLoading(a,!1)}}),$(`#btnSave${r(e,u).sufixo}`).on("click",async function(a){var t;a.preventDefault(),c(t=e,d,ot).call(t)}),$(`#btnSaveParticipantes${r(e,u).sufixo}`).on("click",async function(a){var t;a.preventDefault(),c(t=e,d,nt).call(t)}),$(`#btnAdicionarCliente${r(e,u).sufixo}`).on("click",async function(){n.generateNotification("Funcionalidade em desenvolvimento.","warning")}),$(`#btnAdicionarAnotacao${r(e,u).sufixo}`).on("click",async function(){var t;const a=$(this);n.simulateLoading(a);try{const o=new da(r(e,u).url.baseAnotacao);o.setFocusElementWhenClosingModal=a;const s=await o.modalOpen();s.refresh&&s.register&&c(t=e,d,ea).call(t,s.register)}catch(o){n.generateNotificationErrorCatch(o)}finally{n.simulateLoading(a,!1)}}),$(`#btnInserirPagamento${r(e,u).sufixo}`).on("click",async function(){var t;const a=$(this);n.simulateLoading(a);try{const o=new gt(`${r(e,u).url.base}/${r(e,w)}`);o.setFocusElementWhenClosingModal=a;const s=await o.modalOpen();s.refresh&&s.register&&await c(t=e,d,F).call(t)}catch(o){n.generateNotificationErrorCatch(o)}finally{n.simulateLoading(a,!1)}}),$(`#btnExcluirParticipante${r(e,u).sufixo}`).on("click",async function(){var t,o;await c(t=e,d,I).call(t,`${r(e,w)}/participacao`,null,{title:"Exclusão de Participantes",message:"Confirma a exclusão do(s) participante(s) deste serviço?",success:"Participantes excluídos com sucesso!",button:this,urlApi:`${r(e,u).url.base}`})&&c(o=e,d,at).call(o)}),r(e,E)._buscarPresetParticipacaoTenant()},ea=async function(e){var l;const a=this,t=$(`#divAnotacao${r(a,u).sufixo}`);e.idCol=A.generateUUID();let o="";e.created_at?(o=`<span class="text-body-secondary d-block">Cadastrado em ${D.retornaDadosDataHora(e.created_at,12)}</span>`,e.statusSalvo=!0):e.statusSalvo=!1;const s=n.formatStringToHTML(e.descricao);let i=`
            <div id="${e.idCol}" class="col">
                <div class="card">
                    <div class="card text-center">
                        <div class="card-body">
                            <h5 class="card-title d-flex align-items-center justify-content-between">
                                <span class="text-truncate spanTitle">${e.titulo}</span>
                                <div>
                                    <div class="dropdown">
                                        <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="bi bi-three-dots-vertical"></i>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><button type="button" class="dropdown-item fs-6 btn-edit" title="Editar anotação ${e.titulo}">Editar</button></li>
                                            <li><button type="button" class="dropdown-item fs-6 btn-delete" title="Excluir anotação ${e.titulo}">Excluir</button></li>
                                        </ul>
                                    </div>
                                </div>
                            </h5>
                            <div class="card-text overflow-auto scrollbar" style="max-height: 10rem;">
                                <p class="my-0 pText">${s}</p>
                            </div>
                        </div>
                        <div class="card-footer text-body-secondary">
                            ${o}
                        </div>
                    </div>
                </div>
            </div>`;return t.append(i),c(l=a,d,Ua).call(l,e),pt.apply(),!0},Ua=async function(e){const a=this;$(`#${e.idCol}`).find(".btn-edit").on("click",async function(){const t=$(this);n.simulateLoading(t);try{const o=new da(r(a,u).url.baseAnotacao);o.setDataEnvModal={idRegister:e.id};const s=await o.modalOpen();s.refresh&&s.register&&($(`#${e.idCol}`).find(".spanTitle").html(s.register.titulo),$(`#${e.idCol}`).find(".pText").html(n.formatStringToHTML(s.register.descricao)))}catch(o){n.generateNotificationErrorCatch(o)}finally{n.simulateLoading(t,!1)}}),$(`#${e.idCol}`).find(".btn-delete").click(async function(){var o;await c(o=a,d,I).call(o,e.id,e.titulo,{title:"Exclusão de Anotação",message:`Confirma a exclusão da anotação <b>${e.titulo}</b>?`,success:"Anotação excluída com sucesso!",button:this,urlApi:r(a,u).url.baseAnotacao})&&$(`#${e.idCol}`).remove()})},oa=async function(e){var p,b,h,x,T;const a=this,t=$(`#divPagamento${r(a,u).sufixo}`);e.idCard=`${A.generateUUID()}${r(a,u).sufixo}`;const o=`<span class="text-body-secondary d-block">Pagamento cadastrado em ${D.retornaDadosDataHora(e.created_at,12)}</span>`;let s=c(p=a,d,Ba).call(p,e),i=c(b=a,d,Ja).call(b,e);i+=c(h=a,d,Wa).call(h,e);let l=c(x=a,d,za).call(x,e),f=`
            <div id="${e.idCard}" class="card p-0">
                <div class="card-body">
                    <h5 class="card-title d-flex align-items-center justify-content-between">
                        <span>${e.pagamento_tipo_tenant.nome}</span>
                        <div>
                            <div class="dropdown">
                                <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="bi bi-three-dots-vertical"></i>
                                </button>
                                <ul class="dropdown-menu">
                                    <li><button type="button" class="dropdown-item fs-6 btn-participacao" title="Inserir/Editar Participação ${e.pagamento_tipo_tenant.nome}">Participação</button></li>
                                    <li><button type="button" class="dropdown-item fs-6 btn-edit" title="Editar pagamento">Editar</button></li>
                                    <li><button type="button" class="dropdown-item fs-6 btn-delete" title="Excluir pagamento ${e.pagamento_tipo_tenant.nome}">Excluir</button></li>
                                </ul>
                            </div>
                        </div>
                    </h5>
                    <div class="row row-cols-2 row-cols-md-3 row-cols-xl-5 align-items-end">
                        ${s}
                    </div>
                    ${i}
                    ${l}
                    <div class="form-text mt-2">${o}</div>
                </div>
            </div>`;return t.append(f),lt.addEventPopover(),c(T=a,d,Qa).call(T,e),!0},Ba=function(e){let a="";if(e!=null&&e.conta&&(a+=`
                <div class="col">
                    <div class="form-text mt-0">Conta Padrão</div>
                    <p class="text-truncate">${e.conta.nome}</p>
                </div>`),e.valor_total){const t=n.formatWithCurrencyCommasOrFraction(e.valor_total);a+=`
                <div class="col">
                    <div class="form-text mt-0">Valor Total</div>
                    <p class="">${t}</p>
                </div>`}if(e.entrada_valor){const t=n.formatWithCurrencyCommasOrFraction(e.entrada_valor);a+=`
                <div class="col">
                    <div class="form-text mt-0">Valor Entrada</div>
                    <p class="">${t}</p>
                </div>`}return e.entrada_data&&(a+=`
                <div class="col">
                    <div class="form-text mt-0">Data Entrada</div>
                    <p class="">${D.retornaDadosDataHora(e.entrada_data,2)}</p>
                </div>`),e.parcela_data_inicio&&(a+=`
                <div class="col">
                    <div class="form-text mt-0">Primeira Parcela</div>
                    <p class="">${D.retornaDadosDataHora(e.parcela_data_inicio,2)}</p>
                </div>`),e.parcela_valor&&(a+=`
                <div class="col">
                    <div class="form-text mt-0">Valor Parcela</div>
                    <p class="">${n.formatWithCurrencyCommasOrFraction(e.parcela_valor)}</p>
                </div>`),e.parcela_vencimento_dia&&(a+=`
                <div class="col">
                    <div class="form-text mt-0">Dia Vencimento</div>
                    <p class="">${e.parcela_vencimento_dia}</p>
                </div>`),e.parcela_quantidade&&(a+=`
                <div class="col">
                    <div class="form-text mt-0">Qtd Parcelas</div>
                    <p class="">${e.parcela_quantidade}</p>
                </div>`),e.descricao_condicionado||(a+=`
                <div class="col">
                    <div class="form-text mt-0">Total Aguardando</div>
                    <p class="">${n.formatWithCurrencyCommasOrFraction(e.total_aguardando??0)}</p>
                </div>`,a+=`
                <div class="col">
                    <div class="form-text mt-0">Total Liquidado</div>
                    <p class="">${n.formatWithCurrencyCommasOrFraction(e.total_liquidado??0)}</p>
                </div>`,a+=`
                <div class="col">
                    <div class="form-text mt-0">Total Inadimplente</div>
                    <p class="">${n.formatWithCurrencyCommasOrFraction(e.total_inadimplente??0)}</p>
                </div>`),a},Wa=function(e){let a="";return e.descricao_condicionado&&(a+=`
            <p class="mb-0 text-truncate" title="${e.descricao_condicionado}">
               <b>Descrição condicionado:</b> ${e.descricao_condicionado}
            </p>`),e.observacao&&(a+=`
            <p class="mb-0 text-truncate" title="${e.observacao}">
               <b>Obs:</b> ${e.observacao}
            </p>`),a},za=function(e){var s,i;const a=this;let t="";for(const l of e.lancamentos){let f="";l.observacao&&(f=`<p class="mb-0 text-truncate" title="${l.observacao}">${l.observacao}</p>`);const p=D.retornaDadosDataHora(l.data_vencimento,2),b=n.formatWithCurrencyCommasOrFraction(l.valor_esperado),h=((s=l.conta)==null?void 0:s.nome)??"Conta Padrão do Pagamento",x=((i=l.conta)==null?void 0:i.nome)??`<i>${h}</i>`;l.idCard=`${A.generateUUID()}${r(a,u).sufixo}`,t+=`
                <div id="${l.idCard}" class="card p-0">
                    <div class="card-header">
                        ${l.descricao_automatica}
                    </div>
                    <div class="card-body">
                        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 align-items-end">
                            <div class="col">
                                <div class="form-text mt-0">Data de vencimento</div>
                                <p class="mb-0">${p}</p>
                            </div>
                            <div class="col">
                                <div class="form-text mt-0">Valor</div>
                                <p class="mb-0">${b}</p>
                            </div>
                            <div class="col">
                                <div class="form-text mt-0">Status</div>
                                <p class="mb-0">${l.status.nome}</p>
                            </div>
                            <div class="col">
                                <div class="form-text mt-0">Conta</div>
                                <p class="mb-0 text-truncate" title="${h}">
                                    ${x}
                                </p>
                            </div>
                        </div>
                        ${f}
                    </div>
                </div>`}return`<div class="accordion mt-2" id="accordionPagamento${e.id}">
            <div class="accordion-item">
                <div class="accordion-header">
                    <button class="accordion-button py-1 collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne${e.id}" aria-expanded="false"
                        aria-controls="collapseOne${e.id}">
                        Lançamentos
                    </button>
                </div>
                <div id="collapseOne${e.id}" class="accordion-collapse collapse"
                    data-bs-parent="#accordionPagamento${e.id}">
                    <div class="accordion-body">
                        <div class="row row-cols-1 g-2">${t}</div>
                    </div>
                </div>
            </div>
        </div>`},Ja=function(e){let a="";if(e!=null&&e.participantes&&e.participantes.length>0){const t=mt.htmlRenderParticipantesEIntegrantes(e.participantes);a=`
                <p class="mb-0">
                Participação personalizada:
                <button type="button" class="btn btn-sm btn-outline-danger border-0 btn-delete-participante">Excluir</button>
                <button type="button" class="btn btn-sm btn-outline-info border-0" data-bs-toggle="popover" data-bs-title="Participantes do pagamento ${e.pagamento_tipo_tenant.nome}" data-bs-html="true" data-bs-content="${t.arrayParticipantes.join("<hr class='my-1'>")}">Ver</button>
                <button type="button" class="btn btn-sm btn-outline-info border-0" data-bs-toggle="popover" data-bs-title="Integrantes de Grupos" data-bs-html="true" data-bs-content="${t.arrayIntegrantes.join("<hr class='my-1'>")}">Ver integrantes dos grupos</button>
                </p>`}else a=`
                <p class="mb-0 fst-italic">Participantes herdado do serviço</p>`;return a},Qa=async function(e){const a=this;$(`#${e.idCard}`).find(".btn-edit").on("click",async function(){var o;const t=$(this);n.simulateLoading(t);try{const s=new ya(r(a,u).url.basePagamentos);s.setDataEnvModal={idRegister:e.id};const i=await s.modalOpen();i.refresh&&i.register&&c(o=a,d,F).call(o)}catch(s){n.generateNotificationErrorCatch(s)}finally{n.simulateLoading(t,!1)}}),$(`#${e.idCard}`).find(".btn-delete").on("click",async function(){var o,s;await c(o=a,d,I).call(o,e.id,e.pagamento_tipo_tenant.nome,{title:"Exclusão de Pagamento",message:`Confirma a exclusão do pagamento <b>${e.pagamento_tipo_tenant.nome}</b>?`,success:"Pagamento excluído com sucesso!",button:this,urlApi:r(a,u).url.basePagamentos})&&(c(s=a,d,ia).call(s),$(`#${e.idCard}`).remove())}),$(`#${e.idCard}`).find(".btn-participacao").on("click",async function(){var o;const t=$(this);n.simulateLoading(t);try{const i=await new vt({urlApi:`${r(a,u).url.basePagamentos}/${e.id}/participacao`}).modalOpen();i.refresh&&i.registers&&c(o=a,d,F).call(o)}catch(s){n.generateNotificationErrorCatch(s)}finally{n.simulateLoading(t,!1)}}),$(`#${e.idCard}`).find(".btn-delete-participante").on("click",async function(){var o,s;await c(o=a,d,I).call(o,`${e.id}/participacao`,e.pagamento_tipo_tenant.nome,{title:"Exclusão de Participantes",message:`Confirma a exclusão do(s) participante(s) personalizado(s) do pagamento <b>${e.pagamento_tipo_tenant.nome}</b>?`,success:"Participantes excluídos com sucesso!",button:this,urlApi:`${r(a,u).url.basePagamentos}`})&&c(s=a,d,F).call(s)})},Ga=async function(){var a,t;const e=this;try{await n.loadingModalDisplay();const o=await c(a=e,d,tt).call(a),s=$(`#formServico${r(e,u).sufixo}`);if(o!=null&&o.data){const i=o.data;s.find('input[name="titulo"]').val(i.titulo),n.updateSelect2Value($(`#area_juridica_id${r(e,u).sufixo}`),i.area_juridica.nome,i.area_juridica_id),s.find('textarea[name="descricao"]').val(i.descricao),i.anotacao.forEach(l=>{var f;c(f=e,d,ea).call(f,l)}),i.pagamento.forEach(l=>{var f;c(f=e,d,oa).call(f,l)}),r(e,E)._inserirParticipantesEIntegrantes(i.participantes),c(t=e,d,sa).call(t,o.data)}else s.find("input, textarea, select, button").prop("disabled",!0)}catch(o){n.generateNotificationErrorCatch(o)}finally{await n.loadingModalDisplay(!1)}},sa=function(e){var t,o,s,i;const a=this;c(t=a,d,Ka).call(t,e.valor_servico),c(o=a,d,Xa).call(o,e.total_aguardando),c(s=a,d,Ya).call(s,e.total_liquidado),c(i=a,d,Za).call(i,e.total_inadimplente)},Ka=function(e){const a=this;$(`#valorServico${r(a,u).sufixo}`).html(n.formatWithCurrencyCommasOrFraction(e??0))},Xa=function(e){const a=this;$(`#totalAguardando${r(a,u).sufixo}`).html(n.formatWithCurrencyCommasOrFraction(e??0))},Ya=function(e){const a=this;$(`#totalLiquidado${r(a,u).sufixo}`).html(n.formatWithCurrencyCommasOrFraction(e??0))},Za=function(e){const a=this;$(`#totalInadimplente${r(a,u).sufixo}`).html(n.formatWithCurrencyCommasOrFraction(e??0))},L=async function(e=null){const a=this;let t=e?{selectedIdOption:e}:{};const o=$(`#area_juridica_id${r(a,u).sufixo}`);await n.fillSelect(o,r(a,u).url.baseAreaJuridicaTenant,t)},F=async function(){var a,t;const e=this;try{const s=await new M(r(e,u).url.basePagamentos).getRequest();$(`#divPagamento${r(e,u).sufixo}`).html("");for(const i of s.data)c(a=e,d,oa).call(a,i);await c(t=e,d,ia).call(t)}catch(o){n.generateNotificationErrorCatch(o)}},at=async function(){const e=this;try{const t=await new M(r(e,u).url.baseParticipacao).getRequest();t.data&&r(e,E)._inserirParticipantesEIntegrantes(t.data)}catch(a){n.generateNotificationErrorCatch(a)}},ia=async function(){var a;const e=this;try{const o=await new M(r(e,u).url.baseValores).getRequest();c(a=e,d,sa).call(a,o.data)}catch(t){n.generateNotificationErrorCatch(t)}},tt=async function(e={}){const a=this,{idRegister:t=r(a,w),urlApi:o=r(a,u).url.base}=e;try{const s=new M(o);return s.setParam(t),await s.getRequest()}catch(s){return n.generateNotificationErrorCatch(s),!1}},I=async function(e,a,t={}){var p;const o=this,{button:s=null,title:i="Exclusão de Registro",message:l=`Confirma a exclusão do registro < b > ${a}</ >? `,success:f="Registro excluído com sucesso!"}=t;try{const b=new dt;return b.setDataEnvModal={title:i,message:l},b.setFocusElementWhenClosingModal=s,(await b.modalOpen()).confirmResult&&await c(p=o,d,et).call(p,e,t)?(n.generateNotification(f,"success"),!0):!1}catch(b){return n.generateNotificationErrorCatch(b),!1}},et=async function(e,a={}){const t=this,{urlApi:o=r(t,u).url.base}=a;try{return await pa.delRecurse({idRegister:e,urlApi:o}),!0}catch(s){return n.generateNotificationErrorCatch(s),!1}},ot=function(){var o,s;const e=this,a=$(`#formServico${r(e,u).sufixo}`);let t=n.getInputsValues(a[0]);return c(o=e,d,st).call(o,t,a)&&c(s=e,d,it).call(s,t,r(e,u).url.base),!1},st=function(e,a){if(r(this,R)==_.POST){let o=n.verificationData(e.titulo,{field:a.find('input[name="titulo"]'),messageInvalid:"O título deve ser informado.",setFocus:!0});return o=n.verificationData(e.area_juridica_id,{field:a.find('select[name="area_juridica_id"]'),messageInvalid:"A Área Jurídica deve ser selecionada.",setFocus:o==!0,returnForcedFalse:o==!1}),o=n.verificationData(e.descricao,{field:a.find('textarea[name="descricao"]'),messageInvalid:"A descrição deve ser preenchida.",setFocus:o==!0,returnForcedFalse:o==!1}),o}return!0},it=async function(e,a,t={}){const o=this,{btnSave:s=$(`#btnSave${r(o,u).sufixo}`)}=t;try{n.simulateLoading(s);const i=new M(a);i.setAction(r(o,R)),i.setData(e),r(o,R)===_.PUT&&i.setParam(r(o,w));const l=await i.envRequest();l&&(r(o,R)===_.PUT?n.generateNotification("Dados do serviço alterados com sucesso!","success"):ft.redirectWithUUIDMessage(`${window.frontRoutes.frontRedirectForm}/${l.data.id}`,"Serviço iniciado com sucesso!","success"))}catch(i){n.generateNotificationErrorCatch(i)}finally{n.simulateLoading(s,!1)}},nt=async function(){var t;const e=this;let a={participantes:r(e,u).data.participantesNaTela};r(e,E)._saveVerificationsParticipantes(a)&&await c(t=e,d,rt).call(t,a,r(e,u).url.baseParticipacao,{fieldRegisterName:"registers"})},rt=async function(e,a,t={}){const o=this,{btnSave:s=$(`#btnSaveParticipantes${r(o,u).sufixo}`)}=t;try{n.simulateLoading(s);const i=new M(a);i.setAction(_.POST),i.setData(e);const l=await i.envRequest();l&&(n.generateNotification("Dados enviados com sucesso!","success"),r(o,E)._inserirParticipantesEIntegrantes(l.data))}catch(i){n.generateNotificationErrorCatch(i)}finally{n.simulateLoading(s,!1)}};$(function(){new ht});
